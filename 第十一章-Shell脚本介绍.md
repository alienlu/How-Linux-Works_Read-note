# Shell脚本介绍
> Shell脚本是指在文件中编写一些列命令。Shell会从脚本文件中读取命令，就像你在命令行下输入命令一样。

> 扩展知识：
> Shell一般指的是Bourne Shell。
## 11.1 Shell脚本基础
Shell脚本文件一般开头都会写下 **#!bin/sh**，这定义执行的Shell执行路径，也就是说脚本中的命令会用/bin/sh去进行执行。要确保文件开头 **#!/bin/sh**中没有任何空格。
在定义了脚本开头以后可以在剩下的行写入需要Shell去执行的命令：

例子：
```shell
#!/bin/sh
#
# Print something. then run ls

echo About to run the ls command
ls
```
> 以符号 **#** 开头的行表示这行为注释。 Shell默认执行命令时会忽略这一行。用 **#** 对一些较难理解的命令添加注释，方便日后查看。

在完成Shell脚本编辑后，需要对Shell脚本设置权限，使用**chmod +rx script**可以为脚本添加读取和执行权限。如果你不想系统中其他用户拥有执行此脚本的权限，可以使用**Chmod 700 script**代替上面的命令。

### 11.1.2 Shell脚本的局限性
Shell对命令和文件的操作相对容易。Shell可以重定向输出，这是Shell脚本一个比较重要的功能。但Shell脚本只是Unix/Linux中的一个程序，虽然脚本功能强大，但也有一定的局限性。
Shell脚本其中一个主要优点是它能简化和自动化在Shell提示符（/bin/sh)下执行的任务，例如文件的批处理操作。但如果你尝试截取字符串或者完成一些重复的数学运算，或者访问数据库，又或者你想运用函数和复杂的控制结构，你应该选择一些脚本语言如Python，Perl，或者awk，甚至编译语言如C语言。
最后需要注意的是Shell脚本的文件大小。要保持你的Shell脚本文件较小，毕竟Less is more。

## 11.2 引号和常量
在Shell命令和脚本中比较困惑的是使用引号或者其他符号。可以分别执行一下三个命令：

```shell
echo $100
# 结果是显示 00
echo "$100"
# 结果还是显示 00
echo '$100'
# 结果显示 100
```
为什么会这样呢？

### 11.2.1 常量
> 当你使用引号的时候，你其实是在尝试创建一个常量，并以字符串形式传递到Shell命令行。除了之前看到的 **$** 符号，其他类似情况如将*字符传递给命令行如grep，而不是希望shell对这些符号进行展开。

让我们来看看Shell运行脚本或命令行时发生了什么：
> * 在运行命令前，shell会对命令中的变量，复数及其他需要匹配的地方执行匹配替换（如 **$** 匹配为变量）。
> * 匹配完成后会将结果传递到shell执行。

让我们看看这个例子，寻找在/etc/passwd中所有匹配正则表达式 **r.*t**(意思就是一行中包含一个r后面跟着一个t，可以让你搜索出用户名root，ruth和robot)。
> * 注意下面命令中，$为命令行提示符
```shell
$ grep r.*t /etc/passwd
```
多数情况下，上面的命令会正常运行，但有时候会失败。原因在于当前目录中可能会存在一些名为r.output或r.input的文件，这种情况下shell会将**r.*t**识别为r.input或r.ouput。然后最终传递给shell的命令是**grep r.input r.output /etc/passwd**。解决问题的关键在于使用正确的引号去对字符串进行传递。


